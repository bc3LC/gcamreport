<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="gcamreport">
<title>Dataset Generation Tutorial • gcamreport</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Dataset Generation Tutorial">
<meta property="og:description" content="gcamreport">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">gcamreport</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">7.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--tutorials">
    <span class="fas fa fas fa-book"></span>
     
    Tutorials
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--tutorials">
    <a class="dropdown-item" href="../articles/Step_By_Step_Full_Example.html">Step-by-step Full Example</a>
    <a class="dropdown-item" href="../articles/Dataset_Generation_Tutorial.html">Dataset Generation Tutorial</a>
    <a class="dropdown-item" href="../articles/Interactive_UI_Tutorial.html">Interactive UI Tutorial</a>
    <a class="dropdown-item" href="../articles/Modify_Mapping_Template_Tutorial.html">Modify Mappings and Template Tutorial</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/gcamreport_v6-0.html">Documentation and tutorials for gcamreport v6.0*</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/Version_Guide.html">
    <span class="fa fa-solid fa-seedling"></span>
     
    Version Guide
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bc3LC/gcamreport">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Dataset Generation Tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JGCRI/gcamreport/blob/HEAD/vignettes/Dataset_Generation_Tutorial.Rmd" class="external-link"><code>vignettes/Dataset_Generation_Tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>Dataset_Generation_Tutorial.Rmd</code></div>
    </div>

    
    
<p>To see all possibilities of the <code><a href="../reference/generate_report.html">generate_report()</a></code>
function, look <a href="https://bc3lc.github.io/gcamreport/reference/generate_report.html">here</a>.</p>
<p><span style="color:white">newline</span></p>
<div class="section level2">
<h2 id="example1">Example 1: generate a dataset from a database<a class="anchor" aria-label="anchor" href="#example1"></a>
</h2>
<p>Assume you have a database called <code>myDb</code> in a folder named
<code>dbFolder</code> and are willing to generate a standardized dataset
for several scenarios: <code>scen1</code>, <code>scen2</code>, and
<code>scen3</code>. With the <code>generate_report</code> function, it
will be generated and automatically saved in the same folder where
<code>myDb</code> is.</p>
<ol style="list-style-type: decimal">
<li><p>Follow the <a href="https://bc3lc.github.io/gcamreport/index.html#installation-guide">installation
guide</a> either with R Studio or Docker.</p></li>
<li><p>Load <code>gcamreport</code> library.</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Store the database path and name, the query path, the desired
project name, and the desired scenarios and reporting variables in
variables. In case you do not specify the scenarios, all the scenarios
in the database will be considered for reporting; and if the variables
are not specified, all the available reporting variables will be used.
For more details about scenarios and variables specification, look at
the <a href="https://bc3lc.github.io/gcamreport/articles/Dataset_Generation_Tutorial.html#example-4-specify-the-regions-or-regions-groups">regions’
tutorial</a> or at the <a href="https://bc3lc.github.io/gcamreport/articles/Dataset_Generation_Tutorial.html#example-5-specify-the-variables">variables’
tutorial</a>.</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dbpath</span> <span class="op">&lt;-</span> <span class="st">"/path/to/database"</span></span>
<span><span class="va">dbname</span> <span class="op">&lt;-</span> <span class="st">"gcamdb_name"</span></span>
<span><span class="va">prjname</span> <span class="op">&lt;-</span> <span class="st">"awesomeProj.dat"</span></span>
<span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'scen1'</span>, <span class="st">'scen2'</span>, <span class="st">'scen3'</span><span class="op">)</span></span></code></pre></div>
<p>Notice that the extension is included in the project name. Accepted
extensions: <code>.dat</code> &amp; <code>.proj</code>.</p>
<p><strong>Note</strong>: in case you followed the Docker installation,
you should store your database inside the <code>gcamreport</code> folder
and your root directory is called <code>/app</code>. Thus, your database
path will be something like <code>/app/path/to/database</code>.</p>
<ol start="4" style="list-style-type: decimal">
<li>Generate the dataset until the desired year. In this example, 2050.
By default is 2100 and it should be at least 2025.</li>
</ol>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span>db_path <span class="op">=</span> <span class="va">dbpath</span>, query_path <span class="op">=</span> <span class="va">querypath</span>, db_name <span class="op">=</span> <span class="va">dbname</span>, </span>
<span>                prj_name <span class="op">=</span> <span class="va">prjname</span>, scenarios <span class="op">=</span> <span class="va">scen</span>, final_year <span class="op">=</span> <span class="fl">2050</span>, </span>
<span>                launch_ui <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><strong>Note</strong>: project generation requires approximately 30
minutes.</p>
<p>Notice that the dataset will automatically be saved in
<code>.RData</code>, <code>.csv</code> and <code>.xlsx</code> at
<code>/path/to/database/awesomeProj_standardized.RData</code>,
<code>/path/to/database/awesomeProj_standardized.csv</code>, and
<code>/path/to/database/awesomeProj_standardized.xlsx</code>.</p>
<p>This procedure will also generate a project file at
<code>/path/to/database/dbname_prjname.dat</code> with all the necessary
queries that you need for reporting. You can directly use it as
indicated in <a href="#example2">Example 2</a>.</p>
<p>The terminal will output the performed verifications and their final
status.</p>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="example2">Example 2: generate a dataset from a project<a class="anchor" aria-label="anchor" href="#example2"></a>
</h2>
<p>Assume you have a project called <code>myProj.dat</code> and are
willing to generate a standardized dataset out of it. With the
<code>generate_report</code> function, it will be generated and
automatically saved in the same folder where <code>myProj.dat</code> is.
Notice that <code>myProj.dat</code> should have all the required queries
for the standardized dataset generation. If you are not sure you have
all of them or you need to generate the project, see <a href="#example1">Example1</a>.</p>
<ol style="list-style-type: decimal">
<li><p>Follow the <a href="https://bc3lc.github.io/gcamreport/index.html#installation-guide">installation
guide</a> either with R Studio or Docker.</p></li>
<li><p>Load <code>gcamreport</code> library.</p></li>
</ol>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Store the project path and the desired scenarios and reporting
variables in variables. In case you do not specify the scenarios, all
the scenarios in the database will be considered for reporting; and if
the variables are not specified, all the available reporting variables
will be used. For more details about scenarios and variables
specification, look at the <a href="https://bc3lc.github.io/gcamreport/articles/Dataset_Generation_Tutorial.html#example-4-specify-the-regions-or-regions-groups">regions’
tutorial</a> or at the <a href="https://bc3lc.github.io/gcamreport/articles/Dataset_Generation_Tutorial.html#example-5-specify-the-variables">variables’
tutorial</a>.</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mypath</span> <span class="op">&lt;-</span> <span class="st">"/path/to/project/myProj.dat"</span></span>
<span><span class="va">scen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'scen1'</span>, <span class="st">'scen2'</span>, <span class="st">'scen3'</span><span class="op">)</span></span></code></pre></div>
<p>Notice that the extension is included. Accepted extensions:
<code>.dat</code> &amp; <code>.proj</code>.</p>
<p><strong>Note</strong>: in case you followed the Docker installation,
you should store your database inside the <code>gcamreport</code> folder
and your root directory is called <code>/app</code>. Thus, your database
path will be something like <code>/app/path/to/database</code>.</p>
<ol start="4" style="list-style-type: decimal">
<li>Generate the dataset until the desired year. In this example, 2050.
By default is 2100 and it should be at least 2025.</li>
</ol>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span>prj_name <span class="op">=</span> <span class="va">mypath</span>, scenarios <span class="op">=</span> <span class="va">scen</span>, final_year <span class="op">=</span> <span class="fl">2050</span>, </span>
<span>                launch_ui <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>Notice that the dataset will automatically be saved in
<code>.RData</code>, <code>.csv</code> and <code>.xlsx</code> at
<code>/path/to/project/myProj_standardized.RData</code>,
<code>/path/to/project/myProj_standardized.csv</code>, and
<code>/path/to/project/myProj_standardized.xlsx</code>.</p>
<p>The terminal will output the performed verifications and their final
status.</p>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="example-3-save-or-not-the-output-and-specify-the-file-format-or-the-directory">Example 3: save or not the output and specify the file format or the
directory<a class="anchor" aria-label="anchor" href="#example-3-save-or-not-the-output-and-specify-the-file-format-or-the-directory"></a>
</h2>
<p>Assume you are in the situation of any of the previous examples but
want to either not save the output, save it in <code>.csv</code>,
<code>.xlsx</code>, or both extensions.</p>
<ol style="list-style-type: decimal">
<li><p>Follow the <a href="https://bc3lc.github.io/gcamreport/index.html#installation-guide">installation
guide</a> either with R Studio or Docker.</p></li>
<li><p>Load <code>gcamreport</code> library.</p></li>
</ol>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Use <a href="#example1">example1</a> database or <a href="#example2">example2</a> project description and add all the extra
parameters that you would like to consider in the
<code>generate_report</code> function (e.g., final year, desired
scenarios…). Specify the output saving options through the
<code>save_output</code> parameter</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## -- save the dataset in CSV and XLSX format</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, save_output <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>    <span class="co"># this is the default option</span></span>
<span></span>
<span><span class="co">## -- save the dataset only in CSV format</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, save_output <span class="op">=</span> <span class="st">'CSV'</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## -- save the dataset only in XLSX format</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, save_output <span class="op">=</span> <span class="st">'XLSX'</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## -- do not save the dataset</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, save_output <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Use <a href="#example1">example1</a> database or <a href="#example2">example2</a> project description and add all the extra
parameters that you consider in the <code>generate_report</code>
function. Specify the output directory and output file name through
<code>output_file</code> parameter. This will save the output in the
indicated path as <code>.csv</code> and <code>.xlsx</code>. To modify
this, see the above explanation.</li>
</ol>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## -- save the dataset in '/desired/directory' and in a file called 'awesomeOutput'</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, output_file <span class="op">=</span> <span class="st">'/desired/directory/awesomeOutput'</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="example-4-specify-the-regions-or-regions-groups">Example 4: specify the regions or regions’ group/s<a class="anchor" aria-label="anchor" href="#example-4-specify-the-regions-or-regions-groups"></a>
</h2>
<p>Assume you are in the situation of any of the previous examples but
want to consider only some regions. You have two options to select them:
you can directly specify the desired regions to consider or you can
specify the regions’ group/s to consider. In any case, the desired
regions will make up <em>World</em>. Then, for example, the World’s
total crop land will be the sum of the crop land of
<strong>only</strong> the picked regions.</p>
<ol style="list-style-type: decimal">
<li><p>Follow the <a href="https://bc3lc.github.io/gcamreport/index.html#installation-guide">installation
guide</a> either with R Studio or Docker.</p></li>
<li><p>Load <code>gcamreport</code> library.</p></li>
</ol>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Check which are the available regions or regions’ groups. The
following commands will print a list with all the possibilities.</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/available_regions.html">available_regions</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/available_continents.html">available_continents</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In case you want to save them in a vector, you can simply assign the
output. You can also skip the regions’ console printing by setting
<code>print = FALSE</code>.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avail_reg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/available_regions.html">available_regions</a></span><span class="op">(</span>print <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">avail_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/available_continents.html">available_continents</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Use <a href="#example1">example1</a> database or <a href="#example2">example2</a> project description and add all the extra
parameters that you consider in the <code>generate_report</code>
function (e.g., final final, desired scenarios…). Specify the regions
through the <code>desired_regions</code> parameter or regions’ group
through the <code>desired_continents</code> parameter. Notice that not
both can be specified at the same time.</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## -- specify the desired regions</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, desired_regions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'EU-15'</span>,<span class="st">'EU-12'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## -- specify the desired regions' group/s</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, desired_continents <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'ASIA'</span>,<span class="st">'REF'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="example-5-specify-the-variables">Example 5: specify the variables<a class="anchor" aria-label="anchor" href="#example-5-specify-the-variables"></a>
</h2>
<p>Assume you are in the situation of any of the previous examples but
want to consider only variables.</p>
<ol style="list-style-type: decimal">
<li><p>Follow the <a href="https://bc3lc.github.io/gcamreport/index.html#installation-guide">installation
guide</a> either with R Studio or Docker.</p></li>
<li><p>Load <code>gcamreport</code> library.</p></li>
</ol>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/load_all.html" class="external-link">load_all</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Check which are the available variables. The following command will
print a list with all the possibilities.</li>
</ol>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/available_variables.html">available_variables</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In case you want to save them in a vector, you can simply assign the
output. You can also skip the variables’ console printing by setting
<code>print = FALSE</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">avail_var</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/available_variables.html">available_variables</a></span><span class="op">(</span>print <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Use <a href="#example1">example1</a> database or <a href="#example2">example2</a> project description and add all the extra
parameters that you consider in the <code>generate_report</code>
function (e.g, final year, desired scenarios…). Specify the variables
through the <code>desired_variables</code> parameter. You can specify a
vector with all the desired variables names fully written, or also
consider all variables that start with the same name. This last feature,
allows you to easily select all variables within a group, such as
<em>Emissions</em>, <em>Emissions|CO2</em>, or <em>Agricultural
Demand</em>
</li>
</ol>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## -- specify the desired variables</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, </span>
<span>              desired_variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'Agricultural Demand|Crops|Energy'</span>,</span>
<span>                                    <span class="st">'Agricultural Demand|Crops|Feed'</span>,</span>
<span>                                    <span class="st">'Capacity Additions|Electricity|Wind|Onshore'</span>, </span>
<span>                                    <span class="st">'Emissions|BC|Energy*'</span><span class="op">)</span><span class="op">)</span> <span class="co"># This will select,</span></span>
<span>                                                             <span class="co"># Emissions|BC|Energy,</span></span>
<span>                                                             <span class="co"># Emissions|BC|Energy|Demand|Industry, </span></span>
<span>                                                             <span class="co"># Emissions|BC|Energy|Demand|Residential and Commercial,</span></span>
<span>                                                             <span class="co"># Emissions|BC|Energy|Demand|Transportation,</span></span>
<span>                                                             <span class="co"># Emissions|BC|Energy|Supply</span></span></code></pre></div>
<p>In case you specify only some variables within a group, they will
make up the total value. As an example, if we select <em>Final
Energy|Electricity</em> and <em>Final Energy|Gases</em>, then <em>Final
Energy</em> will be the sum of these two sectors, and will not consider
<em>Final Energy|Industry</em> or <em>Final Energy|Heat</em>.</p>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="troubleshooting-for-the-generate_report-function">Troubleshooting for the <code>generate_report()</code> function<a class="anchor" aria-label="anchor" href="#troubleshooting-for-the-generate_report-function"></a>
</h2>
<div class="section level4">
<h4 id="a-error-on-generate_report-considering-a-database">A) Error on <code>generate_report</code> considering a database<a class="anchor" aria-label="anchor" href="#a-error-on-generate_report-considering-a-database"></a>
</h4>
<p>When running
<code>generate_report(db_path = "path/to/your/database", db_name = "database_name", prj_name = "project_name.dat")</code>,
you might see this error in your R console:</p>
<p>When running
<code>generate_report("path/to/your/data/myData.dat")</code>, you might
see this error in your R console:</p>
<pre><code>&gt; generate_report("path/to/your/data/myData.dat")
[1] "Creating project..."
/home/user/basex/.basex: writing new configuration file.
Error in localDBConn(db_path, db_name, migabble = FALSE) : 
  Database does not exist or is invalid: examples/database_basexdb_ref
In addition: Warning messages:
1: In normalizePath(dbPath) :
  path[1]="examples": No such file or directory
2: The following named parsers don't match the column names: name, date, version </code></pre>
<p>This problem might be due to an incorrect package installation or an
incorrect database placement.</p>
<p><strong>Possible solution 1</strong>: make sure that you cloned the
repo. Check the instructions <a href="https://bc3lc.github.io/gcamreport/index.html#installation-guide">here</a>.</p>
<p><strong>Possible solution 2</strong>: make sure that you placed the
database in the folder you are specifying. It can be, that if you
extracted the database from a zip folder, an intermediate folder has
appeared. In addition:</p>
<ul>
<li><p>In case you are using the <code>gcamreport</code> package
following the <a href="#with-r">R installation</a>, try to copy the
whole path to your data, for instance
<code>db_path = C:\Users\username\Documents\path\to\your\database</code>
if you are using a Windows distribution.</p></li>
<li>
<p>In case you are using the <code>gcamreport</code> package
following the <a href="#with-docker">Docker installation</a>:</p>
<ol style="list-style-type: lower-alpha">
<li><p>make sure that your database is inside the
<code>gcamreport</code> folder.</p></li>
<li><p>make sure that you typed correctly the path to your
<code>gcamreport</code> folder when generating the docker image (5th
step in the <a href="#with-docker">Docker section</a>)</p></li>
<li><p>make sure that you are pointing correctly to your database. For
example, if in the <code>gcamreport</code> folder you have a folder
called <code>some_databases</code> with your database
<code>amazingDatabase</code>, you should refer to it as</p></li>
</ol>
</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># option 1: full path</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span>db_path <span class="op">=</span> <span class="st">"/app/some_databases"</span>, db_name <span class="op">=</span> <span class="st">"amazingDatabase"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># option 2: partial path</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span>db_path <span class="op">=</span> <span class="st">"some_databases"</span>, db_name <span class="op">=</span> <span class="st">"amazingDatabase"</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level4">
<h4 id="b-error-on-generate_report-considering-a-project">B) Error on <code>generate_report</code> considering a project<a class="anchor" aria-label="anchor" href="#b-error-on-generate_report-considering-a-project"></a>
</h4>
<p>When running
<code>generate_report("path/to/your/data/myData.dat")</code>, you might
see this error in your R console:</p>
<pre><code>&gt; generate_report("path/to/your/data/myData.dat")
[1] "Loading project..."
[1] "Loading data, performing checks, and saving output..."
[1] "ag_demand_clean"
Error in rgcam::getQuery(prj, "demand balances by crop commodity") :
  getQuery: Query demand balances by crop commodity is not in any scenarios in the data set.</code></pre>
<p>This problem is due to a wrong path specification.</p>
<p><strong>Possible solution</strong>: make sure that you specified
correctly the path. In addition:</p>
<ul>
<li><p>In case you are using the <code>gcamreport</code> package
following the <a href="#with-r">R installation</a>, try to copy the
whole path to your data, for instance
<code>C:\Users\username\Documents\path\to\your\data\myData.dat</code> if
you are using a Windows distribution.</p></li>
<li>
<p>In case you are using the <code>gcamreport</code> package
following the <a href="#with-docker">Docker installation</a>:</p>
<ol style="list-style-type: lower-alpha">
<li><p>make sure that your data is inside the <code>gcamreport</code>
folder.</p></li>
<li><p>make sure that you typed correctly the path to your
<code>gcamreport</code> folder when generating the docker image (5th
step in the <a href="#with-docker">Docker section</a>)</p></li>
<li><p>make sure that you are pointing correctly to your data. For
example, if in the <code>gcamreport</code> folder you have a folder
called <code>amazingData</code> with your dataset
<code>myData.dat</code>, you should refer to it as</p></li>
</ol>
</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># option 1: full path</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="st">"/app/amazingData/myData.dat"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># option 2: partial path</span></span>
<span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="st">"amazingData/myData.dat"</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level4">
<h4 id="c-error-related-to-system-when-using-the-docker-installation-">C) Error related to <em>system</em> when using the Docker
installation.<a class="anchor" aria-label="anchor" href="#c-error-related-to-system-when-using-the-docker-installation-"></a>
</h4>
<p>Once the R console is opened, you might see this message after
introducing any command:</p>
<pre><code>System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to connect to bus: Host is down
Warning message:
In system("timedatectl", intern = TRUE) :
   running command 'timedatectl' had status 1 </code></pre>
<p><strong>Possible solution</strong>: simply type <code>Ctrl+C</code>
and run your command again.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Rodés-Bachs Clàudia, Sampedro Jon, Van de Ven Dirk-Jan.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
