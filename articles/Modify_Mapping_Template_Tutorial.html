<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Modify Mappings and Template Tutorial â€¢ gcamreport</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Modify Mappings and Template Tutorial">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gcamreport</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book"></span> Tutorials</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials">
<li><a class="dropdown-item" href="../articles/Step_By_Step_Full_Example.html">Step-by-step Full Example</a></li>
    <li><a class="dropdown-item" href="../articles/Dataset_Generation_Tutorial.html">Dataset Generation Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/Interactive_UI_Tutorial.html">Interactive UI Tutorial</a></li>
    <li><a class="dropdown-item" href="../articles/Modify_Mapping_Template_Tutorial.html">Modify Mappings and Template Tutorial</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/gcamreport_v7-0.html">Depracted documentation and tutorials for gcamreport v7.0*</a></li>
    <li><a class="dropdown-item" href="../articles/gcamreport_v6-0.html">Depracted documentation and tutorials for gcamreport v6.0*</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/Version_Guide.html"><span class="fa fa-solid fa-seedling"></span> Version Guide</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/Reporting_Variables.html"><span class="fa fa-solid fa-globe"></span> Reporting Variables</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/bc3LC/gcamreport"><span class="fa fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Modify Mappings and Template Tutorial</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bc3LC/gcamreport/blob/dev/vignettes/Modify_Mapping_Template_Tutorial.Rmd" class="external-link"><code>vignettes/Modify_Mapping_Template_Tutorial.Rmd</code></a></small>
      <div class="d-none name"><code>Modify_Mapping_Template_Tutorial.Rmd</code></div>
    </div>

    
    
<p>In this tutorial, we will modify some of the pre-build mappings of
the <code>gcamreport</code> package. It is necessary to have the
<code>gcamreport</code> package installed either through the <a href="https://bc3lc.github.io/gcamreport/index.html#with-r-full-mode-installation">full
R installation</a> or <a href="https://bc3lc.github.io/gcamreport/index.html#with-docker">Docker</a>.</p>
<p><span style="color:white">newline</span></p>
<div class="section level2">
<h2 id="example-1-step-by-step-to-adapt-current-mappings-to-your-gcam-version">Example 1: step-by-step to adapt current mappings to your GCAM
version<a class="anchor" aria-label="anchor" href="#example-1-step-by-step-to-adapt-current-mappings-to-your-gcam-version"></a>
</h2>
<p>In this example, we assume that the GCAM version is a modified
version of GCAM core 7.0, with additional or altered agricultural items.
The goal is to run the <code>generate_report</code> function and adjust
the mapping files as directed by the messages displayed in the console
by the <code>gcamreport</code> package.</p>
<ol style="list-style-type: decimal">
<li><p>Follow either the <a href="https://bc3lc.github.io/gcamreport/index.html#with-r-full-mode-installation">full
R installation</a> or the <a href="https://bc3lc.github.io/gcamreport/index.html#with-docker">Docker
installation</a>.</p></li>
<li><p>Open the <code>gcamreport.Rproj</code>.</p></li>
<li><p>Run the <code>generate_report</code> function pointing to your
database and indicating the most similar GCAM-core version:</p></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span>db_path <span class="op">=</span> <span class="st">'../path/to/your/db'</span>, db_name <span class="op">=</span> <span class="st">'name_of_the_db'</span>,</span>
<span>                prj_name <span class="op">=</span> <span class="st">'name_of_the_project.dat'</span>, scenarios <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'scenarios'</span>,<span class="st">'list'</span><span class="op">)</span>,</span>
<span>                final_year <span class="op">=</span> <span class="va">XXX</span>, GCAM_version <span class="op">=</span> <span class="st">'v7.0'</span><span class="op">)</span></span></code></pre></div>
<p>The project file will be generated, which may take some time. Once
completed, the reporting standardization will begin. The first error you
encounter may look something like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>Loading data, performing checks, and saving output...</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"ag_demand_clean"</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">left_join_strict</span>(., <span class="fu">filter_variables</span>(<span class="fu">get</span>(<span class="fu">paste</span>(<span class="st">"ag_demand_map"</span>, <span class="sc">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a> Error<span class="sc">:</span> Some rows <span class="cf">in</span> the left dataset do not have matching keys <span class="cf">in</span> the right dataset. In particular, the mapping ag_demand_map_v7<span class="fl">.0</span> misses the following rows<span class="sc">:</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a> inputs, sector</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a> newproduct1, FoodDemand_Staples</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a> newproduct2, FoodDemand_Staples</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a> newproduct3, FoodDemand_NonStaples</span></code></pre></div>
<p>This error indicates that the mapping file <code>ag_demand_map</code>
does not contain all the required items when computing the
<code>ag_demand_clean</code> variable. To resolve this error, add the
missing items (indicated in the terminal) to the mapping file, in this
example located at
<code>inst\extdata\mappings\GCAM7.0\ag_demand_map.csv</code>. Save the
changes and close the file.</p>
<p>Note that mapping files can sometimes be saved under different names.
To find the correct file name, open
<code>inst/extdata/saveDataFiles_GCAM7.0.R</code> and search
(<code>Ctrl + F</code>) for <code>ag_demand_map</code> to find the full
path. In this example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ag_demand_map_v7.0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">rawDataFolder</span>, <span class="st">"inst/extdata/mappings/GCAM7.0"</span>, <span class="st">"ag_demand_map.csv"</span><span class="op">)</span>,</span>
<span>                               skip <span class="op">=</span> <span class="fl">1</span>, stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/gather_map.html">gather_map</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If the error message is unclear and does not provide the mapping file
name, consider debugging by setting breakpoints to the chunk where the
variable is created. In this example, to the
<code>ag_demand_clean</code> variable chunk.</p>
<p><strong>Note</strong>: If you donâ€™t want to include certain items in
the report, you can add a line with the new item indicating
<code>NoReported</code> as variable. In our example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>newproduct1,FoodDemand_Staples,NoReported,,,,,,,,<span class="dv">1</span></span></code></pre></div>
<ol start="4" style="list-style-type: decimal">
<li>Update the package data:</li>
</ol>
<p>Â Â Â Â  a) Run the <code>inst/extdata/saveDataFiles_GCAM7.0.R</code>
script to update the package data.</p>
<p>Â Â Â Â  b) Rebuild the package documentation using
<code>Ctrl + Shift + D</code> or navigate to
<code>Build &gt; More &gt; Document</code>.</p>
<p>Â Â Â Â  c) Install the updated package by going to
<code>Build &gt; Install</code>.</p>
<ol start="5" style="list-style-type: decimal">
<li>Run the <code>generate_report</code> function again, this time
pointing to your project file instead of the database to avoid
regenerating the project:</li>
</ol>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span>prj_name <span class="op">=</span> <span class="st">'../path/to/your/dbname_of_the_project.dat'</span>,</span>
<span>                scenarios <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'scenarios'</span>,<span class="st">'list'</span><span class="op">)</span>,</span>
<span>                final_year <span class="op">=</span> <span class="va">XXX</span>, GCAM_version <span class="op">=</span> <span class="st">'v7.0'</span><span class="op">)</span></span></code></pre></div>
<p>The reporting procedure will start immediately and if the
<code>ag_demand_map</code> mapping was arranged correctly, a new error
might prompt regarding the <code>ag_prices_map</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>Loading data, performing checks, and saving output...</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"ag_demand_clean"</span></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"ag_prices_clean"</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>Error <span class="cf">in</span> <span class="fu">left_join_strict</span>(., <span class="fu">filter_variables</span>(<span class="fu">get</span>(<span class="fu">paste</span>(<span class="st">"ag_prices_map"</span>, <span class="sc">:</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a> Error<span class="sc">:</span> Some rows <span class="cf">in</span> the left dataset do not have matching keys <span class="cf">in</span> the right dataset. In particular, the mapping ag_prices_map_v7<span class="fl">.0</span> misses the following rows<span class="sc">:</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a> sector</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a> newproduct1</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a> newproduct2</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a> newproduct3</span></code></pre></div>
<p>Add the missing items to the mapping located at
<code>inst\extdata\mappings\GCAM7.0\ag_prices_map.csv</code>. Save the
changes to the file and repeat the procedure detailed in Step 4.</p>
<ol start="6" style="list-style-type: decimal">
<li>Iterate Step 4 and 5 until the standardization process is complete.
Occasionally, it may be necessary to clear all environment variables and
restart R to ensure the updated mapping files are properly loaded.</li>
</ol>
<p><strong>Note</strong>: If the error persists and you prefer not to
update the mapping files further, you can change the
<code>left_join_strict</code> call in the code to
<code>dplyr::left_join.</code> However, <strong>please be aware that
this approach is not recommended, as it may compromise the strict
matching intended in the data processing</strong>. If you choose this
option, please follow Step 4 sourcing the <code>R/functions.R</code>
file to ensure the new chuck will be read.</p>
<ol start="7" style="list-style-type: decimal">
<li>Do not forget to push the changes to your branch and tag the new
version to allow reproducibility and reusability!! :)</li>
</ol>
<p><strong>Note</strong>: If you want to install this
<code>gcamreport</code> version into other devices, indicate the tag or
branch name when cloning the repository, for instance:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># to clone the tagged version "vUpdated":</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--branch</span> vUpdated <span class="at">--single-branch</span> https://github.com/bc3LC/gcamreport.git</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># to clone the branch version "vUpdated":</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--branch</span> vUpdated https://github.com/bc3LC/gcamreport.git</span></code></pre></div>
<p>or when installing through Rstudio, for instance:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># to install the tagged version "vUpdated"</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'bc3LC/gcamreport@vUpdated'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># to install the branch version "vUpdated"</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'bc3LC/gcamreport@vUpdated'</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="example-2-step-by-step-to-add-a-new-mapping-item---avocadoseeds-and-avocadoseedstrees">Example 2: step-by-step to add a new mapping item -
<em>AvocadoSeeds</em> and <em>AvocadoSeedsTrees</em><a class="anchor" aria-label="anchor" href="#example-2-step-by-step-to-add-a-new-mapping-item---avocadoseeds-and-avocadoseedstrees"></a>
</h2>
<p>In this example, we assume that the GCAM version is a modification of
the GCAM core 7.0 version with a more detailed land-food system which
reports a new food item called <em>AvocadoSeeds</em> and a new land-leaf
called <em>AvocadoSeedsTrees</em>. Thus, we need to modify
<code>gcamreport</code> to include these items in the reporting dataset.
In this example, the new items add to the final <em>cropland</em> area
and several pollutant <em>emissions</em>, but do not have their own
category in the template.</p>
<ol style="list-style-type: decimal">
<li><p>Follow either the <a href="https://bc3lc.github.io/gcamreport/index.html#with-r-full-mode-installation">full
R installation</a> or the <a href="https://bc3lc.github.io/gcamreport/index.html#with-docker">Docker
installation</a></p></li>
<li><p>Open the <code>gcamreport.Rproj</code>.</p></li>
<li><p>To modify the mappings, it is best to relay on some similar item
that is already present in the mappings. In this case, we relay on
<em>NutsSeeds</em> and <em>NutsSeedsTree</em>. To see where the mapping
modifications should be performed, search across all files
(<code>Ctrl + Shift + F</code>) inside
<code>inst/extdata/mappings/GCAM7.0</code> for the key words
<em>NutsSeeds</em> and <em>NutsSeedsTree</em>.</p></li>
<li><p>Using the previous point method, we can see that we should add
some lines to the following files stored in
<code>inst/extdata/mappings</code>:</p></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>
<code>ag_prices_map.csv</code>. Add this line:</li>
</ol>
<pre><code>AvocadoTrees,,,,,,,,,1</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>
<code>Kyotogas_sector.csv</code>. Add these lines:</li>
</ol>
<pre><code>CH4,AWB,AvocadoTrees,Emissions|Kyoto Gases,Emissions|Kyoto Gases|AFOLU,,,,,,,,,1
N2O,AGR,AvocadoTrees,Emissions|Kyoto Gases,Emissions|Kyoto Gases|AFOLU,,,,,,,,,1
N2O,AWB,AvocadoTrees,Emissions|Kyoto Gases,Emissions|Kyoto Gases|AFOLU,,,,,,,,,1</code></pre>
<ol start="3" style="list-style-type: lower-alpha">
<li>
<code>land_use_map.csv</code>. Add these line</li>
</ol>
<pre><code>AvocadoTrees,Land Cover,Land Cover|Cropland,,,,,,,0.1
AvocadoTreesTree,Land Cover,Land Cover|Cropland,,,,,,,0.1</code></pre>
<ol start="4" style="list-style-type: lower-alpha">
<li>
<code>nonCO2_emissions_sector_map.csv</code>. Add these lines</li>
</ol>
<pre><code>AvocadoTrees,BC_AWB,Emissions|BC,Emissions|BC|AFOLU,,,,,,,1
AvocadoTrees,CH4_AWB,Emissions|CH4,Emissions|CH4|AFOLU,,,,,,,1
AvocadoTrees,CO_AWB,Emissions|CO,Emissions|CO|AFOLU,,,,,,,1
AvocadoTrees,N2O_AGR,Emissions|N2O,Emissions|N2O|AFOLU,,,,,,,1
AvocadoTrees,N2O_AWB,Emissions|N2O,Emissions|N2O|AFOLU,,,,,,,1
AvocadoTrees,NH3_AGR,Emissions|NH3,Emissions|NH3|AFOLU,,,,,,,1
AvocadoTrees,NH3_AWB,Emissions|NH3,Emissions|NH3|AFOLU,,,,,,,1
AvocadoTrees,NMVOC_AWB,Emissions|NMVOC,Emissions|NMVOC|AFOLU,,,,,,,1
AvocadoTrees,NOx_AGR,Emissions|NOx,Emissions|NOx|AFOLU,,,,,,,1
AvocadoTrees,NOx_AWB,Emissions|NOx,Emissions|NOx|AFOLU,,,,,,,1
AvocadoTrees,OC_AWB,Emissions|OC,Emissions|OC|AFOLU,,,,,,,1
AvocadoTrees,SO2_1_AWB,Emissions|Sulfur,Emissions|Sulfur|AFOLU,,,,,,,1
AvocadoTrees,SO2_2_AWB,Emissions|Sulfur,Emissions|Sulfur|AFOLU,,,,,,,1
AvocadoTrees,SO2_3_AWB,Emissions|Sulfur,Emissions|Sulfur|AFOLU,,,,,,,1
AvocadoTrees,SO2_4_AWB,Emissions|Sulfur,Emissions|Sulfur|AFOLU,,,,,,,1</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>
<p>Modify the query file (if necessary, as is in this example). To
do it, copy the default query file located at
<code>inst/extdata/queries/GCAM7.0/queries_gcamreport_general.xml</code>
and add these lines in the <em>aggregated land allocation</em>
query.</p>
<pre><code>&lt;rewrite from="AvocadoSeeds" to="crops" /&gt;
&lt;rewrite from="AvocadoSeedsTree" to="crops" /&gt;</code></pre>
<p>To use it when standardizing your GCAM output, run the
<code>generate_report</code> function specifying the new query file
path:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/generate_report.html">generate_report</a></span><span class="op">(</span><span class="va">...</span>, queries_general_file <span class="op">=</span> <span class="st">"path/to/your/new_queries_general_file.xml"</span><span class="op">)</span></span></code></pre></div>
</li>
</ol>
<p>Another way to modify the query file is to update the default query
file directly. To do this, open the default query file located at
<code>inst/extdata/queries/GCAM7.0/queries_gcamreport_general.xml</code>
and add the necessary lines. The next step (Step 6) will embed the new
version of the query file into the package. With this method, it is no
longer necessary to specify the query file path, as it will be your
default general query file.</p>
<ol start="6" style="list-style-type: decimal">
<li>Update the package data:</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><p>Run the <code>inst/extdata/saveDataFiles_GCAM7.0.R</code> script
to update the package data.</p></li>
<li><p>Rebuild the package documentation using
<code>Ctrl + Shift + D</code> or navigate to
<code>Build &gt; More &gt; Document</code>.</p></li>
<li><p>Install the updated package by going to
<code>Build &gt; Install</code>.</p></li>
</ol>
<ol start="7" style="list-style-type: decimal">
<li>Do not forget to push the changes to your branch and tag the new
version to allow reproducibility and reusability!! :)</li>
</ol>
<p><strong>Note</strong>: If you want to install this
<code>gcamreport</code> version into other devices, indicate the tag or
branch name when cloning the repository, for instance:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># to clone the tagged version "vAvocado":</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--branch</span> vAvocado <span class="at">--single-branch</span> https://github.com/bc3LC/gcamreport.git</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># to clone the branch version "vAvocado":</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--branch</span> vAvocado https://github.com/bc3LC/gcamreport.git</span></code></pre></div>
<p>or when installing through Rstudio, for instance:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># to install the tagged version "vAvocado"</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'bc3LC/gcamreport@vAvocado'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># to install the branch version "vAvocado"</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'bc3LC/gcamreport@vAvocado'</span><span class="op">)</span></span></code></pre></div>
<p><span style="color:white">newline</span></p>
</div>
<div class="section level2">
<h2 id="example-3-step-by-step-to-addmodify-a-template-item---energy-servicetransportationfreightbicycling-and-walking">Example 3: step-by-step to add/modify a template item - <em>Energy
Service|Transportation|Freight|Bicycling and Walking</em><a class="anchor" aria-label="anchor" href="#example-3-step-by-step-to-addmodify-a-template-item---energy-servicetransportationfreightbicycling-and-walking"></a>
</h2>
<p>In this example, we assume that the GCAM version is a modification of
the GCAM core 7.0 version a more detailed energy transportation freight
service that considers <em>Bicycling and Walking</em>. We want to
include this in the report as a new item: <em>Energy
Service|Transportation|Passenger|Bicycling and Walking</em>. To do it,
we need to modify the reporting template.</p>
<ol style="list-style-type: decimal">
<li><p>Follow either the <a href="https://bc3lc.github.io/gcamreport/index.html#with-r-full-mode-installation">full
R installation</a> or the <a href="https://bc3lc.github.io/gcamreport/index.html#with-docker">Docker
installation</a></p></li>
<li><p>Open the <code>gcamreport.Rproj</code>.</p></li>
<li><p>To modify the reporting template, it is best to relay on some
similar item that is already present in the mappings. In this case, we
relay on <em>Energy Service|Transportation|Freight|Road</em>. To see
where the reporting template modifications should be performed, open the
reporting template file
(<code>inst/extdata/template/reporting_template.csv</code>) and search
(<code>Ctrl + F</code>) for the key words <em>Energy
Service|Transportation|Freight|Road</em>.</p></li>
<li>
<p>Using the previous point method, we can see that we should add
one line to the reporting template:</p>
<pre><code>"GCAM 7.0","Energy Service|Transportation|Freight|Bicycling and Walking","billion pkm/yr","energy_service_transportation_clean"</code></pre>
<p>It contains the following columns: GCAM version, item name, units,
and internal variable storing its value.</p>
</li>
<li><p>Update the package data reporting template:</p></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li><p>Run the <code>inst/extdata/saveDataFiles_GCAM7.0.R</code> script
to update the package data.</p></li>
<li><p>Rebuild the package documentation using
<code>Ctrl + Shift + D</code> or navigate to
<code>Build &gt; More &gt; Document</code>.</p></li>
<li><p>Install the updated package by going to
<code>Build &gt; Install</code>.</p></li>
</ol>
<ol start="6" style="list-style-type: decimal">
<li>Do not forget to push the changes to your branch and tag the new
version to allow reproducibility and reusability!! :)</li>
</ol>
<p><strong>Note</strong>: If you want to install this
<code>gcamreport</code> version into other devices, indicate the tag or
branch name when cloning the repository, for instance:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># to clone the tagged version "vTransport":</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--branch</span> vTransport <span class="at">--single-branch</span> https://github.com/bc3LC/gcamreport.git</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="co"># to clone the branch version "vTransport":</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="fu">git</span> clone <span class="at">--branch</span> vTransport https://github.com/bc3LC/gcamreport.git</span></code></pre></div>
<p>or when installing through Rstudio, for instance:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># to install the tagged version "vTransport"</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'bc3LC/gcamreport@vTransport'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># to install the branch version "vTransport"</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'bc3LC/gcamreport@vTransport'</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by ClÃ udia RodÃ©s-Bachs, Jon Sampedro, Russell Horowitz, Dirk-Jan Van de Ven.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
